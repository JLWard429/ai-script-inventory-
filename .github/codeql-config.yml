# üîê Professional CodeQL Configuration
# Advanced security analysis configuration for comprehensive code scanning

name: "Professional CodeQL Analysis Configuration"

# Disable default queries to use our custom configuration
disable-default-queries: false

# Query packs and suites for comprehensive analysis
queries:
  - name: "Security and Quality"
    uses: security-and-quality
  - name: "Security Extended"
    uses: security-extended
  - name: "Code Scanning"
    uses: code-scanning
  
# Custom query filters for fine-tuned analysis
query-filters:
  - exclude:
      kind: problem
      tags:
        - "external/cwe/cwe-209"  # Information exposure through error messages
        - "external/cwe/cwe-116"  # Improper encoding or escaping
    severity: note
  - include:
      kind: 
        - problem
        - path-problem
      tags:
        - security
        - correctness
        - maintainability

# Path-based analysis configuration
paths:
  # Include important paths for analysis
  - "python_scripts/**"
  - ".github/scripts/**"
  - "*.py"
  
# Exclude paths that don't need analysis  
paths-ignore:
  - "**/*.md"
  - "**/*.txt"
  - "**/*.json"
  - "**/test_*/**"
  - "**/*_test.py"
  - "**/*.log"
  - ".git/**"
  - "node_modules/**"
  - "venv/**"
  - "env/**"
  - "__pycache__/**"
  - "*.pyc"
  - ".pytest_cache/**"
  - "build/**"
  - "dist/**"
  - ".tox/**"

# Build configuration for different languages
build:
  # Python-specific build configuration
  python:
    # Use custom build steps if needed
    # commands:
    #   - "pip install -r requirements.txt"
    #   - "python setup.py build"
    
    # Environment variables for build
    environment:
      - name: "PYTHONPATH"
        value: "."
      - name: "PYTHONDONTWRITEBYTECODE"
        value: "1"

# Additional configuration for advanced analysis
packs:
  # Official CodeQL packs
  - "codeql/python-queries"
  - "codeql/python-all"
  
  # Community and experimental packs (when available)
  # - "github/codeql-python-experimental"

# Analysis configuration
analysis:
  # Increase timeout for thorough analysis
  timeout: 120
  
  # Memory configuration
  ram: 14000
  
  # Thread configuration for parallel analysis
  threads: 0  # Use all available threads
  
  # Additional analysis options
  sarif-add-baseline-file-info: true
  
# Feature flags for advanced capabilities
feature-flags:
  - "enable-kotlin-beta"
  - "enable-experimental-features"

# Compilation database configuration (if needed)
# compilation-database:
#   - "compile_commands.json"

# External dependencies configuration
# dependencies:
#   - name: "custom-queries"
#     version: "1.0.0"
#     source: "github.com/security/custom-codeql-queries"